<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exsi3D - Najlepszy sklep 3d</title>

    <link rel="icon" type="image/png" href="https://i.imgur.com/MhJTp8K.png">
    <link rel="shortcut icon" href="https://i.imgur.com/MhJTp8K.png">
    <link rel="apple-touch-icon" href="https://i.imgur.com/MhJTp8K.png">
    
    <style>
        /* Ustawienia resetujƒÖce i podstawowy styl czcionki */
        body { margin: 0; font-family: Arial, sans-serif; }

        /* --- Style dla Paska Nawigacyjnego (Header) --- */
        .navbar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 50px; background-color: white; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .logo img { height: 60px; display: block; }
        .nav-links ul { list-style: none; padding: 0; margin: 0; display: flex; }
        .nav-links li { margin-left: 25px; position: relative; }
        .nav-links a {
            text-decoration: none; color: #333; font-weight: bold; font-size: 14px;
            padding: 10px 0; display: inline-block; transition: color 0.2s; cursor: pointer;
        }
        .nav-links li:first-child a { color: #007bff; } /* Aktywna strona */
        .dropdown-open > a { color: #007bff; }
        .nav-links a:hover { color: #0056b3; }
        .arrow-down {
            display: inline-block; margin-left: 5px; width: 0; height: 0;
            border-left: 4px solid transparent; border-right: 4px solid transparent;
            border-top: 4px solid #333; transition: border-top-color 0.2s;
        }
        .dropdown-open .arrow-down { border-top: 4px solid #007bff; }

        /* --- STYLE DLA DROPDOWN PRODUKT√ìW --- */
        .dropdown-menu {
            position: absolute; top: 100%; left: 50%; transform: translateX(-50%);
            background-color: white; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 4px; min-width: 150px; padding: 10px 0; z-index: 20;
            display: none !important; list-style: none;
        }
        .dropdown-menu.visible { display: block !important; }
        .dropdown-menu a { padding: 8px 15px; display: block; color: #333; font-weight: normal; }
        .dropdown-menu a:hover { background-color: #f4f4f4; color: #007bff; }
        
        /* --- Style dla Ikon i Dropdown Konta --- */
        .icons-group { display: flex; align-items: center; gap: 20px; }
        .account-icon { position: relative; cursor: pointer; font-size: 24px; }
        .account-img { height: 30px; width: 30px; border-radius: 50%; display: block; }
        .account-dropdown {
            position: absolute; top: 100%; right: 0; background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); border-radius: 4px;
            padding: 10px 0; min-width: 150px; z-index: 30; display: none;
        }
        .account-dropdown a {
            display: block; padding: 8px 15px; text-decoration: none; color: #333;
            font-size: 14px; font-weight: normal;
        }
        .account-dropdown a:hover { background-color: #f4f4f4; color: #007bff; }
        .account-dropdown.visible { display: block; }
        
        /* Styl dla ikony koszyka (emotka) */
        .cart { 
            font-size: 24px; 
            position: relative; 
            cursor: pointer; 
            line-height: 1; /* Upewnia siƒô, ≈ºe emotka jest dobrze wy≈õrodkowana */
        }
        
        .cart-count {
            position: absolute; top: -8px; right: -10px; background-color: red;
            color: white; border-radius: 50%; padding: 2px 6px; font-size: 10px;
            font-weight: bold; line-height: 1; border: 2px solid white;
        }
        
        /* --- Style dla Sekcji Hero --- */
        .hero-section {
            display: flex; align-items: center; justify-content: center;
            padding: 60px 50px; background-color: #C8E6C9; min-height: 500px;
        }
        .hero-content { flex: 1; max-width: 500px; padding-right: 50px; }
        .hero-subtitle { color: #3b82f6; font-weight: bold; font-size: 16px; margin: 0 0 10px 0; text-transform: uppercase; }
        .hero-title { color: #333; font-size: 48px; font-weight: 800; line-height: 1.1; margin: 0 0 30px 0; }
        .hero-button {
            display: inline-block; background-color: #3b82f6; color: white;
            padding: 12px 25px; border-radius: 8px; text-decoration: none;
            font-weight: bold; transition: background-color 0.3s; border: none;
            cursor: pointer; font-size: 16px;
        }
        .hero-button:hover { background-color: #2563eb; }
        .hero-image-container { flex: 1; max-width: 550px; position: relative; display: flex; justify-content: center; }
        .carousel-slide {
            background-color: white; padding: 20px; border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); width: 100%; max-width: 450px;
        }
        .carousel-slide img { display: block; width: 100%; height: auto; }
        
        /* --- Style dla Modali (Formularzy) --- */
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
        .modal-content {
            background-color: #fefefe; margin: 10% auto; padding: 30px;
            border: 1px solid #888; width: 90%; max-width: 400px; border-radius: 8px;
            position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        /* Styl dla du≈ºych modali z tre≈õciƒÖ tekstowƒÖ */
        #regulations-modal .modal-content,
        #privacy-modal .modal-content,
        #guarantee-modal .modal-content {
            max-width: 600px;
            margin-top: 5%; 
        }
        
        #regulations-modal h3,
        #privacy-modal h3,
        #guarantee-modal h3 {
            margin-top: 20px;
            font-size: 16px;
            color: #333;
        }
        
        #regulations-modal ol, #privacy-modal ul {
            padding-left: 20px;
            list-style-type: decimal;
            font-size: 14px;
            line-height: 1.5;
        }
        #privacy-modal ul {
             list-style-type: disc;
        }
        #regulations-modal li, #privacy-modal li {
            margin-bottom: 5px;
        }
        
        .close-btn { color: #aaa; float: right; font-size: 28px; font-weight: bold; position: absolute; top: 10px; right: 20px; }
        .close-btn:hover, .close-btn:focus { color: #333; text-decoration: none; cursor: pointer; }
        .modal-content h2 { text-align: center; margin-bottom: 20px; }
        
        .modal-content form label { display: block; margin-top: 10px; font-weight: bold; font-size: 14px; color: #555; }
        .modal-content form input {
            width: 100%; padding: 10px; margin: 5px 0 15px 0; border: 1px solid #ccc; box-sizing: border-box; border-radius: 4px;
        }
        
        .modal-content form button {
            background-color: #007bff; color: white; padding: 12px 20px;
            margin: 10px 0; border: none; cursor: pointer; width: 100%;
            border-radius: 4px; font-size: 16px;
        }
        .modal-content form button:hover { background-color: #0056b3; }
        .error-message { color: red; font-size: 12px; margin-top: -10px; text-align: center; }
        
        /* --- Style dla WyskakujƒÖcego Powiadomienia (Toast Notification) --- */
        .notification {
            visibility: hidden; min-width: 250px; background-color: #4CAF50;
            color: white; text-align: center; border-radius: 2px; padding: 16px;
            position: fixed; z-index: 200; left: 50%; bottom: 30px;
            transform: translateX(-50%); font-size: 17px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: visibility 0s, opacity 0.5s linear; opacity: 0;
        }
        .notification.show { visibility: visible; opacity: 1; }
        .notification.error { background-color: #f44336; }
        
        /* --- Style dla Stopki (Footer) - NOWY, ULEPSZONY DESIGN --- */
        .footer {
            background-color: #f8f8f8; /* Jasne t≈Ço */
            color: #444; /* Ciemniejszy, czytelny tekst */
            padding: 40px 50px;
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* Uk≈Çad 3 kolumnowy na desktopie */
            gap: 30px;
            border-top: 1px solid #eee;
            font-size: 14px;
        }

        .footer-section h4 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
            font-weight: bold;
            border-bottom: 2px solid #007bff; /* Podkre≈õlenie tytu≈Çu sekcji */
            padding-bottom: 5px;
            display: inline-block;
        }

        .footer-links ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 8px;
        }

        .footer-links a {
            color: #444;
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: #007bff; /* Efekt hover */
            text-decoration: underline;
        }

        .footer-contact p {
            margin: 5px 0;
            line-height: 1.4;
        }

        .footer-social-media {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        /* Styl dla ikony TikToka jako obrazka */
        .footer-social-media img {
            height: 25px; /* Mniejsza ikona */
            margin-right: 15px; 
            vertical-align: middle;
            transition: opacity 0.2s;
        }
        .footer-social-media img:hover {
            opacity: 0.8;
        }

        .footer-bottom {
            grid-column: 1 / -1; /* Zajmuje ca≈ÇƒÖ szeroko≈õƒá */
            text-align: center;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid #ddd;
            color: #777;
            font-size: 12px;
        }
        
        /* Media Query - dostosowanie do ma≈Çych ekran√≥w (RWD) */
        @media (max-width: 900px) {
            .navbar { padding: 10px 20px; }
            .hero-section { flex-direction: column; text-align: center; padding: 40px 20px; }
            .hero-content { padding-right: 0; padding-bottom: 30px; max-width: 100%; }
            .hero-title { font-size: 36px; }
            .hero-image-container { max-width: 100%; }
            
            .footer {
                grid-template-columns: 1fr; /* Jedna kolumna na mobilnym */
                padding: 30px 20px;
                text-align: center;
            }
            .footer-section h4 {
                margin: 20px auto 15px auto;
            }
            .footer-social-media {
                justify-content: center;
            }
            .dropdown-menu { position: static; transform: none; box-shadow: none; border: none; padding: 0; }
        }
    </style>
</head>
<body>

    <header class="navbar">
        <a href="index.html" class="logo">
            <img src="https://i.imgur.com/MhJTp8K.png" alt="Logo Exsi3D">
        </a>
        <nav class="nav-links">
            <ul>
                <li><a href="index.html">STRONA G≈Å√ìWNA</a></li>
                <li class="dropdown" id="dropdown-parent">
                    <a href="sklep/index.html" id="products-link">PRODUKTY</a>
                        <span class="arrow-down"></span>
                    </a>
                    <ul class="dropdown-menu" id="dropdown-menu">
                        <li><a href="sklep/index.html?category=przedmioty">Przedmioty</a></li>
                        <li><a href="sklep/index.html?category=gad≈ºety">Gad≈ºety</a></li>
                    </ul>
                </li>
                <li><a href="#">KONTAKT</a></li>
            </ul>
        </nav>
        
        <div class="icons-group">
            <div class="account-icon" id="account-icon">
                <img id="nav-profile-photo" src="image_2245d8.png" alt="Konto U≈ºytkownika" class="account-img">
                <div class="account-dropdown" id="account-dropdown">
                    <a href="#" id="login-link" class="state-logged-out">Zaloguj siƒô</a>
                    <a href="#" id="register-link" class="state-logged-out">Zarejestruj siƒô</a>

                    <a href="Profil/index.html" id="profile-link" class="state-logged-in" style="display: none;">Profil</a>
                    <a href="#" id="logout-nav-link" class="state-logged-in" style="display: none;">Wyloguj</a>
                </div>
            </div>
            <div class="cart">
                üõí
                <span class="cart-count">0</span>
            </div>
        </div>
    </header>

    <main class="hero-section">
        <div class="hero-content">
            <p class="hero-subtitle">Odkryj ≈õwiat Gad≈ºet√≥w</p>
            <h1 class="hero-title">Wszysko wyjatkowe</h1>
            <a href="index.html" class="hero-button">Poznaj moje produkty</a>
        </div>
        
        <div class="hero-image-container">
            <div class="carousel-slide">
                
            </div>
        </div>
    </main>
    
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-login">&times;</span>
            <h2>Zaloguj siƒô</h2>
            <form id="login-form">
                <label for="login-user">Nazwa u≈ºytkownika lub Adres E-mail</label>
                <input type="text" id="login-user" required>
                
                <label for="login-pass">Has≈Ço</label>
                <input type="password" id="login-pass" required>
                
                <button type="submit">Zaloguj</button>
                <p class="error-message" id="login-error"></p>
            </form>
        </div>
    </div>

    <div class="modal" id="register-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-register">&times;</span>
            <h2>Zarejestruj siƒô</h2>
            <form id="register-form">
                <label for="reg-email">Email</label>
                <input type="email" id="reg-email" required>
                
                <label for="reg-user">Nazwa u≈ºytkownika</label>
                <input type="text" id="reg-user" required>
                
                <label for="reg-pass">Has≈Ço (min. 8 znak√≥w)</label>
                <input type="password" id="reg-pass" required>
                
                <button type="submit">Zarejestruj</button>
                <p class="error-message" id="register-error"></p>
            </form>
        </div>
    </div>
    
    <div id="regulations-modal" class="modal">
        <div class="modal-content" style="max-width: 600px; text-align: left;">
            <span class="close-btn" id="close-regulations-btn">&times;</span>
            <h2>Regulamin sklepu internetowego Exsi3D</h2>
            
            <div style="max-height: 400px; overflow-y: auto; padding-right: 15px;">
                <p>#</p>
                <h3>1. Informacje og√≥lne</h3>
                <ol>
                    <li>Sklep internetowy Exsi3D prowadzony jest przez Ksawerego Niemca, dzia≈ÇajƒÖcego za zgodƒÖ i pod opiekƒÖ rodzica Agnieszki Sarneckiej, miejsce zamieszkania: Ma≈Çopolska, adres e‚Äëmail kontaktowy: <a href="mailto:exsi390@gmail.com">exsi390@gmail.com</a>.</li>
                    <li>Sklep zajmuje siƒô sprzeda≈ºƒÖ produkt√≥w wykonywanych metodƒÖ druku 3D.</li>
                    <li>Ka≈ºdy Klient korzystajƒÖcy ze sklepu akceptuje niniejszy Regulamin.</li>
                </ol>

                <h3>2. Definicje</h3>
                <ol>
                    <li><strong>Sprzedawca</strong> ‚Äì Ksawery Niemiec, dzia≈ÇajƒÖcy za zgodƒÖ rodzica.</li>
                    <li><strong>Klient</strong> ‚Äì osoba fizyczna, prawna lub jednostka organizacyjna dokonujƒÖca zakupu.</li>
                    <li><strong>Sklep</strong> ‚Äì serwis internetowy Exsi3D umo≈ºliwiajƒÖcy sk≈Çadanie zam√≥wie≈Ñ.</li>
                    <li><strong>Produkt</strong> ‚Äì wydruk 3D oferowany przez sklep.</li>
                </ol>

                <h3>3. Zam√≥wienia</h3>
                <ol>
                    <li>Zam√≥wienia mo≈ºna sk≈Çadaƒá wy≈ÇƒÖcznie przez oficjalnƒÖ stronƒô sklepu Exsi3D.</li>
                    <li>Z≈Ço≈ºenie zam√≥wienia jest r√≥wnoznaczne z akceptacjƒÖ Regulaminu.</li>
                    <li>Realizacja zam√≥wienia rozpoczyna siƒô po potwierdzeniu przez Sprzedawcƒô.</li>
                    <li>Terminy realizacji ustalane sƒÖ indywidualnie, zale≈ºnie od z≈Ço≈ºono≈õci wydruku.</li>
                </ol>

                <h3>4. Ceny i p≈Çatno≈õci</h3>
                <ol>
                    <li>Wszystkie ceny ustalane sƒÖ indywidualnie i podawane przed realizacjƒÖ zam√≥wienia.</li>
                    <li>P≈Çatno≈õƒá odbywa siƒô przelewem lub innƒÖ uzgodnionƒÖ formƒÖ.</li>
                </ol>

                <h3>5. Dostawa</h3>
                <ol>
                    <li>Dostawa odbywa siƒô za po≈õrednictwem wybranej firmy kurierskiej lub odbiorem osobistym, je≈õli dostƒôpny. Czas wysy≈Çki wynosi od 2 do 14 dni roboczych, w zale≈ºno≈õci od rodzaju zam√≥wienia.</li>
                    <li>Koszt dostawy ponosi Klient, chyba ≈ºe ustalono inaczej.</li>
                </ol>

                <h3>6. Reklamacje</h3>
                <ol>
                    <li>Klient ma prawo zg≈Çosiƒá reklamacjƒô w przypadku wad produktu.</li>
                    <li>Reklamacje nale≈ºy zg≈Çaszaƒá mailowo na adres: <a href="mailto:exsi390@gmail.com">exsi390@gmail.com</a>.</li>
                    <li>Sprzedawca udzieli odpowiedzi w terminie do 14 dni.</li>
                </ol>

                <h3>7. Prawo odstƒÖpienia od umowy</h3>
                <ol>
                    <li>Produkty drukowane na zam√≥wienie wed≈Çug indywidualnych wytycznych nie podlegajƒÖ zwrotowi, chyba ≈ºe posiadajƒÖ wady. Produkty gotowe, kt√≥re nie sƒÖ wykonywane na indywidualne zam√≥wienie, podlegajƒÖ standardowemu prawu odstƒÖpienia od umowy.</li>
                    <li>W pozosta≈Çych przypadkach prawo odstƒÖpienia ustalane jest indywidualnie.</li>
                </ol>

                <h3>8. Postanowienia ko≈Ñcowe</h3>
                <ol>
                    <li>Sprzedawca zastrzega sobie prawo do zmian Regulaminu.</li>
                    <li>W sprawach nieuregulowanych zastosowanie majƒÖ przepisy prawa polskiego.</li>
                </ol>
            </div>
            
        </div>
    </div>
    
    <div id="privacy-modal" class="modal">
        <div class="modal-content" style="max-width: 600px; text-align: left;">
            <span class="close-btn" id="close-privacy-btn">&times;</span>
            <h2>Polityka prywatno≈õci sklepu Exsi3D</h2>
            
            <div style="max-height: 400px; overflow-y: auto; padding-right: 15px;">
                <h3>1. Administrator danych</h3>
                <p>Administratorem danych osobowych jest Ksawery Niemiec, dzia≈ÇajƒÖcy pod opiekƒÖ rodzica Agnieszki Sarneckiej, kontakt: <a href="mailto:exsi390@gmail.com">exsi390@gmail.com</a>.</p>

                <h3>2. Zakres przetwarzanych danych</h3>
                <p>Sklep mo≈ºe zbieraƒá nastƒôpujƒÖce dane:</p>
                <ul>
                    <li>imiƒô i nazwisko Klienta,</li>
                    <li>adres e‚Äëmail,</li>
                    <li>adres dostawy,</li>
                    <li>dane potrzebne do realizacji zam√≥wienia.</li>
                </ul>

                <h3>3. Cel przetwarzania danych</h3>
                <p>Dane przetwarzane sƒÖ w celu:</p>
                <ul>
                    <li>realizacji zam√≥wie≈Ñ,</li>
                    <li>kontaktu z Klientem,</li>
                    <li>obs≈Çugi reklamacji.</li>
                </ul>

                <h3>4. Podstawa prawna</h3>
                <p>PodstawƒÖ przetwarzania danych jest zgoda Klienta oraz konieczno≈õƒá realizacji umowy.</p>

                <h3>5. Udostƒôpnianie danych</h3>
                <p>Dane mogƒÖ byƒá przekazywane firmom kurierskim w zakresie niezbƒôdnym do dostawy.</p>

                <h3>6. Czas przechowywania danych</h3>
                <p>Dane przechowywane sƒÖ przez okres realizacji zam√≥wienia oraz obowiƒÖzkowy okres archiwizacji.</p>

                <h3>7. Prawa Klienta</h3>
                <p>Klient ma prawo do:</p>
                <ul>
                    <li>dostƒôpu do swoich danych,</li>
                    <li>ich poprawiania,</li>
                    <li>usuniƒôcia,</li>
                    <li>ograniczenia przetwarzania,</li>
                    <li>wniesienia sprzeciwu.</li>
                </ul>

                <h3>8. Kontakt</h3>
                <p>W sprawach dotyczƒÖcych danych osobowych nale≈ºy kontaktowaƒá siƒô mailowo: <a href="mailto:exsi390@gmail.com">exsi390@gmail.com</a>.</p>

                <h3>9. Postanowienia ko≈Ñcowe</h3>
                <p>Polityka mo≈ºe byƒá aktualizowana. Aktualna wersja obowiƒÖzuje od momentu publikacji.</p>
            </div>
        </div>
    </div>
    
    <div id="guarantee-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; text-align: left;">
            <span class="close-btn" id="close-guarantee-btn">&times;</span>
            <h2>Gwarancja jako≈õci wydruk√≥w 3D</h2>
            
            <div style="max-height: 400px; overflow-y: auto; padding-right: 15px;">
                <p>Wydruki 3D wykonywane sƒÖ z zachowaniem najwy≈ºszej mo≈ºliwej jako≈õci odpowiedniej dla technologii FDM/FFF.</p>
                
                <p style="font-weight: bold;">Wa≈ºna informacja:</p>
                <p>Produkty mogƒÖ posiadaƒá widoczne linie warstw, drobne artefakty oraz minimalne r√≥≈ºnice kolorystyczne wynikajƒÖce z procesu druku ‚Äî nie sƒÖ one uznawane za wady.</p>
                
                <p>Sprzedawca gwarantuje, ≈ºe w przypadku powa≈ºnych defekt√≥w uniemo≈ºliwiajƒÖcych prawid≈Çowe u≈ºytkowanie produktu klient mo≈ºe zg≈Çosiƒá reklamacjƒô zgodnie z zasadami opisanymi w sekcji "Reklamacje" w Regulaminie.</p>
            </div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="footer-section footer-links">
            <h4>INFORMACJE</h4>
            <ul>
                <li><a href="#" id="regulations-link">Regulamin</a></li>
                <li><a href="#" id="privacy-link">Polityka prywatno≈õci</a></li>
                <li><a href="#" id="guarantee-link">Gwarancja jako≈õci wydruk√≥w 3D</a></li>
            </ul>
        </div>
        
        <div class="footer-section footer-contact">
            <h4>KONTAKT</h4>
            <p>üìß Email: <a href="mailto:Exsi390@gmail.com" style="color: inherit;">Exsi390@gmail.com</a></p>
            <p>üìç Siedziba: Ma≈Çopolska</p>
            <p>üë§ W≈Ça≈õciciel: Ksawery Niemiec</p>
        </div>

        <div class="footer-section">
            <h4>BƒÑD≈π NA BIE≈ªƒÑCO</h4>
            <div class="footer-social-media">
                <a href="https://www.tiktok.com/@exsi3d" target="_blank" title="TikTok Exsi3D" style="display: block;">
                    <img src="https://i.imgur.com/JTAkO9v.png" alt="Logo TikTok Exsi3D">
                </a> 
            </div>
            <p style="margin-top: 10px;">≈öled≈∫ nas, aby poznaƒá nowe produkty i kulisy druku 3D!</p>
        </div>
        
        <div class="footer-bottom">
            &copy; 2026 Exsi3D. Wszelkie prawa zastrze≈ºone.
        </div>
    </footer>
    <div id="toast-notification" class="notification"></div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- INICJALIZACJA BAZY DANYCH (localStorage) ---
            
            const storedUsersString = localStorage.getItem('users');
            let users = storedUsersString ? JSON.parse(storedUsersString) : [];

            // Je≈õli lista jest pusta, dodajemy domy≈õlnego u≈ºytkownika testowego 
            if (users.length === 0) {
                const defaultUser = {
                    email: "test@exsi.pl",
                    username: "test",
                    password: "haslo123",
                    profilePicture: "image_2245d8.png" 
                };
                users.push(defaultUser);
                localStorage.setItem('users', JSON.stringify(users));
            }

            // --- STAN APLIKACJI ---
            let loggedInUser = sessionStorage.getItem('loggedInUser') ? JSON.parse(sessionStorage.getItem('loggedInUser')) : null;
            
            // --- ELEMENTY DOM ---
            const productsLink = document.getElementById('products-link');
            const dropdownMenu = document.getElementById('dropdown-menu');
            const dropdownParent = document.getElementById('dropdown-parent'); 
            const accountIcon = document.getElementById('account-icon');
            const accountDropdown = document.getElementById('account-dropdown');
            const loginLink = document.getElementById('login-link');
            const registerLink = document.getElementById('register-link');
            const logoutNavLink = document.getElementById('logout-nav-link');
            const navProfilePhoto = document.getElementById('nav-profile-photo');

            const loginModal = document.getElementById('login-modal');
            const registerModal = document.getElementById('register-modal');
            const closeLoginBtn = document.getElementById('close-login');
            const closeRegisterBtn = document.getElementById('close-register');

            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const notification = document.getElementById('toast-notification');

            // --- ELEMENTY STOPKI ---
            const regulationsModal = document.getElementById('regulations-modal');
            const regulationsLink = document.getElementById('regulations-link');
            const closeRegulationsBtn = document.getElementById('close-regulations-btn');

            const privacyModal = document.getElementById('privacy-modal');
            const privacyLink = document.getElementById('privacy-link');
            const closePrivacyBtn = document.getElementById('close-privacy-btn');

            const guaranteeModal = document.getElementById('guarantee-modal');
            const guaranteeLink = document.getElementById('guarantee-link');
            const closeGuaranteeBtn = document.getElementById('close-guarantee-btn');
            
            // --- FUNKCJE POMOCNICZE ---

            function showNotification(message, isError = false) {
                notification.textContent = message;
                notification.classList.remove('error');
                if (isError) {
                    notification.classList.add('error');
                }
                notification.classList.add('show');
                
                setTimeout(function(){
                    notification.classList.remove('show');
                }, 3000);
            }
            
            function handleLogout(event) {
                event.preventDefault();
                sessionStorage.removeItem('loggedInUser');
                loggedInUser = null;
                updateAccountView(null);
                showNotification('Pomy≈õlnie wylogowano.');
            }

            // FUNKCJA KLUCZOWA: AKTUALIZACJA WIDOKU KONTA
            function updateAccountView(user) {
                if (user) {
                    // Zalogowany: poka≈º Profil/Wyloguj, ukryj Zaloguj/Zarejestruj
                    document.querySelectorAll('.state-logged-out').forEach(el => el.style.display = 'none');
                    document.querySelectorAll('.state-logged-in').forEach(el => el.style.display = 'block');
                    navProfilePhoto.src = user.profilePicture || 'image_2245d8.png';
                } else {
                    // Wylogowany: poka≈º Zaloguj/Zarejestruj, ukryj Profil/Wyloguj
                    document.querySelectorAll('.state-logged-out').forEach(el => el.style.display = 'block');
                    document.querySelectorAll('.state-logged-in').forEach(el => el.style.display = 'none');
                    navProfilePhoto.src = 'image_2245d8.png'; 
                }
                accountDropdown.classList.remove('visible'); // Zamyka dropdown po zmianie stanu
            }

            // Inicjalizacja widoku przy ≈Çadowaniu strony
            updateAccountView(loggedInUser);

            // --- OBS≈ÅUGA FORMULARZY ---

            // LOGOWANIE
            loginForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const loginInput = document.getElementById('login-user').value;
                const loginPassword = document.getElementById('login-pass').value;
                const loginError = document.getElementById('login-error');

                const currentUsersString = localStorage.getItem('users');
                const currentUsers = currentUsersString ? JSON.parse(currentUsersString) : [];

                const foundUser = currentUsers.find(user => 
                    (user.username.toLowerCase() === loginInput.toLowerCase() || 
                     user.email.toLowerCase() === loginInput.toLowerCase()) && 
                    user.password === loginPassword
                );
                
                if (foundUser) { 
                    loggedInUser = foundUser;
                    sessionStorage.setItem('loggedInUser', JSON.stringify(foundUser));
                    updateAccountView(loggedInUser);

                    showNotification(`Logowanie udane! Witaj, ${foundUser.username}!`);
                    loginModal.style.display = 'none';
                    loginForm.reset(); 
                    loginError.textContent = '';
                } else {
                    loginError.textContent = 'Nieprawid≈Çowa nazwa u≈ºytkownika/has≈Ço.';
                    showNotification('B≈ÇƒÖd logowania. Sprawd≈∫ dane.', true);
                }
            });

            // REJESTRACJA
            registerForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const email = document.getElementById('reg-email').value;
                const username = document.getElementById('reg-user').value;
                const password = document.getElementById('reg-pass').value;
                const registerError = document.getElementById('register-error');
                registerError.textContent = '';
                
                if (password.length < 8) {
                    registerError.textContent = 'B≈ÇƒÖd: Has≈Ço musi mieƒá minimum 8 znak√≥w.';
                    showNotification('B≈ÇƒÖd: Has≈Ço jest za kr√≥tkie.', true);
                    return;
                }
                
                const userExists = users.some(user => 
                    user.username.toLowerCase() === username.toLowerCase() || 
                    user.email.toLowerCase() === email.toLowerCase()
                );

                if (userExists) {
                    registerError.textContent = 'B≈ÇƒÖd: Nazwa u≈ºytkownika lub e-mail sƒÖ ju≈º zajƒôte.';
                    showNotification('B≈ÇƒÖd rejestracji. U≈ºytkownik ju≈º istnieje.', true);
                    return;
                }

                const newUser = {
                    email: email,
                    username: username,
                    password: password,
                    profilePicture: "image_2245d8.png" 
                };

                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                showNotification('Rejestracja udana! Mo≈ºesz siƒô teraz zalogowaƒá.');
                registerModal.style.display = 'none';
                registerForm.reset();
            });

            // --- OBS≈ÅUGA ELEMENT√ìW NAWIGACJI ---

            // Dropdown Produkty
            productsLink.addEventListener('click', function(event) {
                event.preventDefault(); 
                dropdownMenu.classList.toggle('visible');
                dropdownParent.classList.toggle('dropdown-open');
            });

            // Klikniƒôcie poza Dropdown Produkty
            document.addEventListener('click', function(event) {
                if (!dropdownParent.contains(event.target)) {
                    dropdownMenu.classList.remove('visible');
                    dropdownParent.classList.remove('dropdown-open');
                }
            });
            
            // Dropdown Konto
            accountIcon.addEventListener('click', function(event) {
                event.stopPropagation(); 
                accountDropdown.classList.toggle('visible');
            });
            
            // Logika wylogowania w nawigacji
            logoutNavLink.addEventListener('click', handleLogout); 

            // Linki otwierajƒÖce modale
            loginLink.addEventListener('click', function(event) {
                event.preventDefault();
                accountDropdown.classList.remove('visible');
                loginModal.style.display = 'block';
                document.getElementById('register-error').textContent = ''; 
                document.getElementById('login-error').textContent = '';
            });

            registerLink.addEventListener('click', function(event) {
                event.preventDefault();
                accountDropdown.classList.remove('visible');
                registerModal.style.display = 'block';
                document.getElementById('register-error').textContent = '';
                document.getElementById('login-error').textContent = '';
            });

            // Zamykanie Modali
            closeLoginBtn.addEventListener('click', function() {
                loginModal.style.display = 'none';
            });

            closeRegisterBtn.addEventListener('click', function() {
                registerModal.style.display = 'none';
            });

            // --- OBS≈ÅUGA MODALI STOPKI ---
            
            // Logika Modalu Regulaminu
            regulationsLink.addEventListener('click', function(event) {
                event.preventDefault();
                regulationsModal.style.display = 'block';
            });
            
            closeRegulationsBtn.addEventListener('click', function() {
                regulationsModal.style.display = 'none';
            });

            // Logika Modalu Polityki Prywatno≈õci
            privacyLink.addEventListener('click', function(event) {
                event.preventDefault();
                privacyModal.style.display = 'block';
            });
            
            closePrivacyBtn.addEventListener('click', function() {
                privacyModal.style.display = 'none';
            });

            // Logika Modalu Gwarancji
            guaranteeLink.addEventListener('click', function(event) {
                event.preventDefault();
                guaranteeModal.style.display = 'block';
            });
            
            closeGuaranteeBtn.addEventListener('click', function() {
                guaranteeModal.style.display = 'none';
            });

            // --- Globalne zamykanie modali i dropdown√≥w po klikniƒôciu poza nimi ---
            window.addEventListener('click', function(event) {
                if (event.target === loginModal) {
                    loginModal.style.display = 'none';
                }
                if (event.target === registerModal) {
                    registerModal.style.display = 'none';
                }
                if (event.target === regulationsModal) { 
                    regulationsModal.style.display = 'none';
                }
                if (event.target === privacyModal) { 
                    privacyModal.style.display = 'none';
                }
                if (event.target === guaranteeModal) { 
                    guaranteeModal.style.display = 'none';
                }
                if (!accountIcon.contains(event.target)) {
                    accountDropdown.classList.remove('visible');
                }
            });
        });
    </script>

</body>

</html>
